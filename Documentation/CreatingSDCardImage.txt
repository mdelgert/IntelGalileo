1. Preparing the virtual machine

2. # apt-get install debootstrap build-essential binutils git gawk chrpath kernel-package fakeroot libncurses5-dev parted p7zip-full lrzip

3. # mkdir /src

4. # cd /src

5. Download kernel packages see following link for latest link https://communities.intel.com/docs/DOC-22226

# wget http://downloadmirror.intel.com/23197/eng/Board_Support_Package_Sources_for_Intel_Quark_v1.0.1.7z

If Intel is down 

# wget -O Board_Support_Package_Sources_for_Intel_Quark_v1.0.1.7z https://github.com/mdelgert/IntelGalileo/blob/master/Sources/Board_Support_Package_Sources_for_Intel_Quark_v1.0.1.7z?raw=true 

6. Extract patches and has for HEAD of git tree

# mkdir /src/bsp && cd /src/bsp

# 7z x ../*7z && tar xvf quark_linux* && rm -f *7z *gz *txt

# cat quark_linux*/upstream.cfg

# git clone git://git.kernel.org/pub/scm/linux/kernel/git/stable/linux-stable.git

# cd linux-stable/

# git reset --hard 531ec28f9f26f78797124b9efcf2138b89794a1e  

# git am ../quark_linux*/00*

7. Add kernel config 

Several options use default stock kernel config 

# cp ./meta/cfg/kernel-cache/bsp/quark/quark.cfg .config

or use example config with working cifs support

wget -O .config https://raw.githubusercontent.com/mdelgert/IntelGalileo/master/Sources/config-3.8.7+

Note: Several article around Intel Galileo issues when mounting samba CIFS drives having errors "CIFS support has to be enabled in the kernel".

Option to backup kernel before building

# cd /src/bsp

Using tar

tar --exclude='.git' -zcvf IntelGalileoDebianKernelSource1.tar.gz /src/bsp/linux-stable




-------------------------------------Todo-----------------------------------------------



For more details see http://sourceforge.net/p/galileodebian/wiki/SetupSDCard/, https://www.kernel.org/